<Page
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:control="clr-namespace:FilterDataGrid;assembly=FilterDataGrid"
      xmlns:av="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="av" x:Class="Packing"
      Title="Packing" Background="#FAFAFA" FontFamily="Segoe UI" FontSize="11" Height="922">

    <Page.Resources>

        <!-- Header style -->
        <Style x:Key="HeaderStyle" TargetType="{x:Type DataGridColumnHeader}">
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Background" Value="#F5F7FA"/>
            <Setter Property="Foreground" Value="#333"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="Padding" Value="8,4"/>
            <Setter Property="BorderThickness" Value="0,0,0,1"/>
            <Setter Property="BorderBrush" Value="#DBE2E8"/>
        </Style>

        <!-- Row style without unconditional background -->
        <Style x:Key="RowStyle" TargetType="{x:Type DataGridRow}">
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Foreground" Value="#222"/>
            <Setter Property="MinHeight" Value="22"/>
            <Setter Property="Padding" Value="6,2"/>
            <Style.Triggers>
                <!-- Selected Row -->
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="LightBlue"/>
                    <Setter Property="Foreground" Value="White"/>
                </Trigger>
                <!-- Hover -->
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="LightBlue"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style TargetType="DataGridCell">
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="Foreground" 
     Value="{Binding Foreground, RelativeSource={RelativeSource AncestorType=DataGridRow}}"/>
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Foreground" Value="White"/>
                    <Setter Property="Background" Value="LightBlue"/>
                </Trigger>
            </Style.Triggers>
        </Style>


        <!-- Cell text style with trimming -->
        <Style x:Key="CellTextStyle" TargetType="{x:Type TextBlock}">
            <Setter Property="Padding" Value="6,0"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="TextTrimming" Value="CharacterEllipsis"/>
            <Setter Property="Foreground" Value="#444"/>
        </Style>

        <!-- Highlight blue for ProjectStatus Open -->

    </Page.Resources>

    <Grid Margin="1,5,0,0">
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition Width="5"/>
            <ColumnDefinition Width=".9*"/>
        </Grid.ColumnDefinitions>


        <!-- Splitter -->
        <Grid Grid.Column="0" Margin="5">

            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="20"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <Border Background="White" CornerRadius="6" Padding="16" BorderBrush="#D1D9E6" BorderThickness="1" Grid.Row="0" >
                <StackPanel>
                    <TextBlock Text="Packing Bundles:" FontWeight="SemiBold" FontSize="13" Foreground="#222" Margin="0,0,0,0" />

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="50"/>
                            <ColumnDefinition Width="120"/>
                            <ColumnDefinition Width="5"/>
                            <ColumnDefinition Width="90"/>
                            <ColumnDefinition Width="90"/>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="20"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>


                        <TextBlock Text="Project:" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center" FontWeight="SemiBold" Margin="0,0,8,8"/>
                        <ComboBox x:Name="CMB_PackProj" Grid.Row="1" Grid.Column="1" Width="110" FontSize="12" Margin="0,3,0,5" VerticalAlignment="Center" SelectedItem="{Binding SelectedProject, Mode=TwoWay}" HorizontalAlignment="Left" IsEditable="True"/>

                        <Button x:Name="Btn_Projapply" Content="Apply" Grid.Row="1" Grid.Column="3" Width="80" Height="30" Margin="0,0,0,0" Click="Applybtn_Click" Background="#007AFF" Foreground="White" FontWeight="SemiBold" HorizontalAlignment="Left" BorderThickness="0" Cursor="Hand"  />
                        <Button x:Name="Btn_ProjClear" Content="Clear" Grid.Row="1" Grid.Column="4" Width="80" Height="30" Margin="0,0,0,0" Click="Clearbtn_Click" Background="Red" Foreground="White" FontWeight="SemiBold" HorizontalAlignment="Left" BorderThickness="0" Cursor="Hand"  />
                        <TextBlock Text="Customer:" Grid.Row="1" Grid.Column="5" VerticalAlignment="Center" FontWeight="SemiBold" Margin="0,0,8,8"/>
                        
                        <TextBlock x:Name="Txt_customer" Text="" Grid.Row="1" Grid.Column="6" FontSize="13" VerticalAlignment="Center" FontWeight="Bold" Margin="0,0,8,8"/>
                        
                    </Grid>

                </StackPanel>
            </Border>
            <TextBlock Text="Ready to Pack:" FontWeight="SemiBold" FontSize="13" Foreground="#222" Margin="0,0,0,0" Grid.Row="1"/>

            <Grid Grid.Row="2" Margin="0" >

                <Border Background="White" CornerRadius="6" Padding="5" BorderBrush="#D1D9E6" BorderThickness="1" Grid.Row="1" >
                    <StackPanel Margin="10,0,0,0">
                        <TextBlock Text="Packing Details" FontWeight="SemiBold" FontSize="13" Foreground="#222" Margin="0,0,0,0" />

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="80"/>
                                <ColumnDefinition Width="auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="10"/>
                                <RowDefinition Height="Auto"/>

                            </Grid.RowDefinitions>

                            <TextBlock Text="Package Type:" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center" FontWeight="SemiBold" Margin="0,0,0,8"/>
                            <ComboBox Grid.Row="1" Grid.Column="1" Width="110" FontSize="12" Margin="0,3,0,5" VerticalAlignment="Center" HorizontalAlignment="Left"/>
                            <Button Content="Create Bundle" Grid.Row="1" Grid.Column="2" Width="80" Height="25" Margin="10,0,0,0" Background="Green" Foreground="White" FontWeight="SemiBold" HorizontalAlignment="Left" BorderThickness="0" Cursor="Hand"  />

                        </Grid>

                    </StackPanel>
                </Border>
                <control:FilterDataGrid 
                x:Name="ProjDG"
                IsEnabled="false"
                 SelectionMode="Single"
                    GotFocus="Projitemfocus"
 AutoGenerateColumns="False" 
 CanUserAddRows="False"
 ShowRowsCount="True"
 ShowStatusBar="True"
 FilterLanguage="English"
 RowHeight="22"
 FontSize="11"
 ColumnHeaderHeight="28"
 AlternationCount="1"
 RowBackground="White"
 AlternatingRowBackground="#F8F9FB"
 ColumnHeaderStyle="{StaticResource HeaderStyle}"
 RowStyle="{StaticResource RowStyle}"
 CanUserResizeColumns="True"
 CanUserSortColumns="True"
             Grid.Row="1"
 Margin="0,0,0,0" >

                    <control:FilterDataGrid.Columns>

                        <control:DataGridTextColumn Header="Part Number" Binding="{Binding PartNumber}" Width="140" IsColumnFiltered="True" ElementStyle="{StaticResource CellTextStyle}" />
                        <control:DataGridTextColumn Header="Description" Binding="{Binding Description}" Width="280" IsColumnFiltered="True" ElementStyle="{StaticResource CellTextStyle}" />
                        <control:DataGridTextColumn Header="Weight" Binding="{Binding UnitWeight}" Width="60" IsColumnFiltered="True" ElementStyle="{StaticResource CellTextStyle}" />
                        <control:DataGridTextColumn Header="Colour" Binding="{Binding Colour}" Width="90" IsColumnFiltered="True" ElementStyle="{StaticResource CellTextStyle}" />
                        <control:DataGridTextColumn Header="Qnty" Binding="{Binding BOMQty}" Foreground="Black"  FontWeight="Bold" Width="90" IsColumnFiltered="True" ElementStyle="{StaticResource CellTextStyle}" />
                        <control:DataGridTextColumn Header="Packed" Binding="{Binding ProducedQty}" Foreground="Green"  FontWeight="SemiBold" Width="70" IsColumnFiltered="True" ElementStyle="{StaticResource CellTextStyle}" />
                        <control:DataGridTextColumn Header="Ready" Binding="{Binding ReadyQty}" Width="70" IsColumnFiltered="True" ElementStyle="{StaticResource CellTextStyle}"/>
                        <control:DataGridTextColumn Header="Pending" Binding="{Binding BalanceQty}" Foreground="Red" FontWeight="SemiBold" Width="70" IsColumnFiltered="True" ElementStyle="{StaticResource CellTextStyle}" />
                        <control:DataGridTextColumn Header="Status" Binding="{Binding Status}" FontWeight="SemiBold" Width="70" IsColumnFiltered="True" ElementStyle="{StaticResource CellTextStyle}" />
                    </control:FilterDataGrid.Columns>
                </control:FilterDataGrid>

            </Grid>


        </Grid>

        <!-- Splitter -->
        <GridSplitter Grid.Column="1" Width="10" Background="#ddd" HorizontalAlignment="Center" VerticalAlignment="Stretch"  />

        <!-- Details and StockIn Panel -->
        <Grid x:Name="PROJPANEL" Grid.Column="2" Margin="0" IsEnabled="False" >
            <Grid.RowDefinitions>
                <RowDefinition Height="80"/>
                <RowDefinition Height="20"/>
                <RowDefinition Height="500"/>
                <RowDefinition Height="10"/>
                <RowDefinition Height="20"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <Border x:Name="createbundlepanel"  Background="White" CornerRadius="6" Padding="5" IsEnabled="False" BorderBrush="#D1D9E6" BorderThickness="1" Grid.Row="0">
                <StackPanel Margin="10,0,0,0">
                    <TextBlock Text="BUNDLE DETAILS" FontWeight="SemiBold" FontSize="13" Foreground="#222" Margin="0,0,0,0" />

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="80"/>
                            <ColumnDefinition Width="auto"/>
                            <ColumnDefinition Width="250"/>
                            <ColumnDefinition Width="80"/>
                            <ColumnDefinition Width="auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="Auto"/>

                        </Grid.RowDefinitions>

                        <TextBlock Text="Bundle  Type:" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center" FontWeight="SemiBold" Margin="0,0,0,8"/>
                        <ComboBox x:Name="CMB_Packtype" Grid.Row="1" Grid.Column="1" Width="110" FontSize="12" Margin="0,3,0,5" VerticalAlignment="Center" HorizontalAlignment="Left"/>
                        <Button x:Name="CreateBundle" Content="Create Bundle" Click="CreateBundle_Click" Grid.Row="1" Grid.Column="2" Width="80" Height="25" Margin="10,0,0,0" Background="Green" Foreground="White" FontWeight="SemiBold" HorizontalAlignment="Left" BorderThickness="0" Cursor="Hand"  />
                        

                    </Grid>

                </StackPanel>

            </Border>

            <!-- Details DataGrid -->


            <!-- Details DataGrid -->
            <control:FilterDataGrid 
    x:Name="BundleDG"
    SelectionMode="Single"
    SelectionChanged="BundleDG_sel_change"
    AutoGenerateColumns="False" 
    CanUserAddRows="False"
    ShowRowsCount="True"
    ShowStatusBar="True"
    FilterLanguage="English"
    RowHeight="22"
    FontSize="11"
    ColumnHeaderHeight="28"
    AlternationCount="1"
    RowBackground="White"
    AlternatingRowBackground="#F8F9FB"
    ColumnHeaderStyle="{StaticResource HeaderStyle}"
    RowStyle="{StaticResource RowStyle}"
    CanUserResizeColumns="True"
    CanUserSortColumns="True" Grid.Row="2">

                <control:FilterDataGrid.Columns>
                    <control:DataGridTextColumn Header="Project" Binding="{Binding ProjNo}" Width="70" IsColumnFiltered="True" ElementStyle="{StaticResource CellTextStyle}" />
                    <control:DataGridTextColumn Header="Pack ID" Binding="{Binding PackID}" Width="130" IsColumnFiltered="True">
                        <control:DataGridTextColumn.ElementStyle>
                            <Style TargetType="{x:Type TextBlock}" BasedOn="{StaticResource CellTextStyle}">
                                <Setter Property="FontWeight" Value="Bold"/>
                                <Setter Property="Foreground" Value="Black"/>
                            </Style>
                        </control:DataGridTextColumn.ElementStyle>
                    </control:DataGridTextColumn>
                    <control:DataGridTextColumn Header="Pack Type" Binding="{Binding PackType}" Width="280" IsColumnFiltered="True" ElementStyle="{StaticResource CellTextStyle}" />
                    <control:DataGridTextColumn Header="Created By" Binding="{Binding CreatedBy}" Width="100" IsColumnFiltered="True" ElementStyle="{StaticResource CellTextStyle}" />
                    <control:DataGridTextColumn Header="Width" Binding="{Binding PackEntryDate, StringFormat={}{0:dd-MM-yyyy - HH:mm}}" Width="150" IsColumnFiltered="True" ElementStyle="{StaticResource CellTextStyle}" />
                    <control:DataGridTemplateColumn Header="Action" Width="50">
                        <control:DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Button Content="Edit" 
                            Padding="4,2"
                            Click="Bundledit_Click"
                            Background="#0078D7"
                            Foreground="White"
                            FontSize="11"
                            BorderThickness="0"
                            Cursor="Hand"/>
                            </DataTemplate>
                        </control:DataGridTemplateColumn.CellTemplate>
                    </control:DataGridTemplateColumn>
                </control:FilterDataGrid.Columns>
            </control:FilterDataGrid>
            <GridSplitter HorizontalAlignment="Stretch" Grid.Row="3"/>

            <TextBlock Text="Bundle List Table:" FontWeight="SemiBold" FontSize="13" Foreground="#222" Margin="0,0,0,0"  Grid.Row="1"/>

            <Grid  Grid.Row="4">

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="auto"/>
                    
                </Grid.ColumnDefinitions>

                <TextBlock Text="Bundle Item Table:" FontWeight="SemiBold" Grid.Column="0" FontSize="13" Foreground="#222" Margin="0,0,0,0"  Grid.Row="4" />
                <Button x:Name="exitpack" Content="X" IsEnabled="False" Grid.Column="1" Width="20" Height="20" Margin="150,0,5,0" Background="DarkRed" Foreground="White" FontWeight="SemiBold" HorizontalAlignment="Left" BorderThickness="0" Cursor="Hand" Click="Editexit" />

            </Grid>


            <Grid x:Name="Bundleeditpanel" Grid.Row="5" IsEnabled="False" >

                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="120"/>
                    <ColumnDefinition Width="*"/>
                    
                </Grid.ColumnDefinitions>
                
                



                <control:FilterDataGrid 
                    x:Name="BundleitemDG"
GotFocus="BundleitemFocus"
                    Grid.Column="1"
                    AutoGenerateColumns="False"    
                    ShowRowsCount="True"
                    CanUserAddRows="False"
                    ShowStatusBar="True"
                    FilterLanguage="English"
                    RowHeight="22"
                    FontSize="11"
                    ColumnHeaderHeight="28"
                    AlternationCount="2"
                    RowBackground="White"
                    AlternatingRowBackground="#F8F9FB"
                    ColumnHeaderStyle="{StaticResource HeaderStyle}"
                    RowStyle="{StaticResource RowStyle}"
                    CanUserResizeColumns="True"
                    CanUserSortColumns="True">

                    <control:FilterDataGrid.Columns>
                        <control:DataGridTextColumn Header="Description" Binding="{Binding Description}" Width="250" IsColumnFiltered="True" ElementStyle="{StaticResource CellTextStyle}" />
                        <control:DataGridTextColumn Header="Quantity" Binding="{Binding Qty}" Width="90" IsColumnFiltered="True" ElementStyle="{StaticResource CellTextStyle}" />
                        <control:DataGridTextColumn Header="Created On" Binding="{Binding enterDate, StringFormat={}{0:dd-MM-yyyy - HH:mm}}" Width="150" IsColumnFiltered="True" ElementStyle="{StaticResource CellTextStyle}" />
                        <control:DataGridTextColumn Header="Created by" Binding="{Binding UserID}" Width="100" IsColumnFiltered="True" ElementStyle="{StaticResource CellTextStyle}" />
                    </control:FilterDataGrid.Columns>
                </control:FilterDataGrid>


                <Border Background="White" CornerRadius="6" Padding="5" BorderBrush="#D1D9E6" BorderThickness="1" Grid.Row="0" Grid.Column="0">
                    <StackPanel Margin="10,0,0,0">
                        <TextBlock Text="Add to Package" FontWeight="SemiBold" FontSize="13" Foreground="#222" Grid.Row="0" Margin="0,0,0,0" />

                        <Grid>

                            <Grid.RowDefinitions>
                                <RowDefinition Height="10"/>
                                <RowDefinition Height="0"/>
                                <RowDefinition Height="30"/>
                                <RowDefinition Height="30"/>
                                <RowDefinition Height="30"/>
                                <RowDefinition Height="60"/>
                                <RowDefinition Height="50"/>

                            </Grid.RowDefinitions>

                            <TextBlock Text="Qunatity" Grid.Row="2"  VerticalAlignment="Center" FontWeight="SemiBold" Margin="20,0,0,0"/>
                            <TextBox x:Name="bndl_qty" Grid.Row="3"  IsEnabled="False"  Width="80" Height="20" Margin="5,0,0,5" VerticalAlignment="Center" HorizontalAlignment="Left"/>
                            <Button x:Name="bndl_apply" Content="Add >>"  IsEnabled="False" Click ="Additem_Click" Grid.Row="4"  Width="80" Height="25" Margin="5,0,5,0" Background="Green" Foreground="White" FontWeight="SemiBold" HorizontalAlignment="Left" BorderThickness="0" Cursor="Hand"  />
                            <Button x:Name="bndl_remove" Content="X Remove" IsEnabled="False" Grid.Row="5"  Width="80" Height="25" Margin="5,0,5,0" Background="Red" Foreground="White" FontWeight="SemiBold" HorizontalAlignment="Left" BorderThickness="0" Cursor="Hand"  Click="Removeitem_Click"/>
                       
                        </Grid>

                    </StackPanel>
                </Border>

            </Grid>

        </Grid>
    </Grid>
</Page>
